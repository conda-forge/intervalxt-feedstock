From b4b513228ac581790eb97f873985afaaf7f55c10 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Julian=20R=C3=BCth?= <julian.rueth@fsfe.org>
Date: Thu, 14 Jul 2022 21:11:18 +0300
Subject: [PATCH] Allow build with fmt=9

---
 doc/news/fmt9.rst          | 3 +++
 libintervalxt/configure.ac | 4 +++-
 2 files changed, 6 insertions(+), 1 deletion(-)
 create mode 100644 doc/news/fmt9.rst

diff --git a/doc/news/fmt9.rst b/doc/news/fmt9.rst
new file mode 100644
index 0000000..cb0db9f
--- /dev/null
+++ b/doc/news/fmt9.rst
@@ -0,0 +1,3 @@
+**Fixed:**
+
+* Allow build with fmt library version 6, 7, 8 or 9.
diff --git a/libintervalxt/configure.ac b/libintervalxt/configure.ac
index 91b11bc..e6f0b39 100644
--- a/libintervalxt/configure.ac
+++ b/libintervalxt/configure.ac
@@ -45,7 +45,9 @@ AC_CHECK_HEADERS([boost/type_traits.hpp], , AC_MSG_ERROR([boost headers not foun
 AC_CHECK_HEADERS([fmt/format.h], , AC_MSG_ERROR([fmt headers not found]))
 AX_CXX_CHECK_LIB([fmt], [fmt::v6::getpagesize()], , [
   AX_CXX_CHECK_LIB([fmt], [fmt::v7::getpagesize()], , [
-    AX_CXX_CHECK_LIB([fmt], [fmt::v8::report_system_error(int code=0, const char* message=nullptr)], , [AC_MSG_ERROR([fmt library not found])], [-lfmt])
+    AX_CXX_CHECK_LIB([fmt], [fmt::v8::report_system_error(int code=0, const char* message=nullptr)], , [
+      AX_CXX_CHECK_LIB([fmt], [fmt::v9::report_system_error(int code=0, const char* message=nullptr)], , [AC_MSG_ERROR([fmt library not found])], [-lfmt])
+    ], [-lfmt])
   ], [-lfmt])
 ], [-lfmt])
 
-- 
2.37.1

